{"version":3,"sources":["containers/ShopPage/components/Filter/index.js","containers/ShopPage/components/Sidebar/index.js","containers/ShopPage/components/Loading/index.js","containers/ShopPage/index.js"],"names":["Filter","sidebar","setSidebar","setSort","products","className","onChange","e","target","value","length","onClick","Sidebar","handlePrice","type","id","htmlFor","formatLabel","ConvertVnd","step","minValue","maxValue","Loading","ShopPage","useState","loading","setLoading","error","setError","setProducts","currentPage","setCurrentPage","sort","page","setPage","min","max","setValue","slug","useParams","slugRef","useRef","timeRef","getProduct","a","current","limit","limitProductCategory","console","log","url","URL_API","productApi","res","data","totalPage","useEffect","clearTimeout","setTimeout","map","product","index","ProductItem","pageCount","prevLabel","nextLabel","containerClassName","pageClassName","activeClassName","pageLinkClassName","activeLinkClassName","nextLinkClassName","previousLinkClassName","onPageChange","scrollToTop","selectedPage","selected","initialPage"],"mappings":"+OA4BeA,G,cA1BA,SAAC,GAAgD,IAA9CC,EAA6C,EAA7CA,QAASC,EAAoC,EAApCA,WAAYC,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,SAC9C,OACE,sBAAKC,UAAU,SAAf,UACE,qBAAKA,UAAU,cAAf,SACE,yBACEA,UAAU,sBACVC,SAAU,SAACC,GAAD,OAAOJ,EAAQI,EAAEC,OAAOC,QAFpC,UAIE,wBAAQA,MAAM,UAAd,sDACA,wBAAQA,MAAM,aAAd,wDACA,wBAAQA,MAAM,cAAd,6DAGJ,sBAAKJ,UAAU,eAAf,UACE,qBAAKA,UAAU,uBAAf,SACE,wEAAuBD,EAASM,OAAhC,0BAEF,sBAAKL,UAAU,uBAAuBM,QAAS,kBAAMT,GAAYD,IAAjE,UACE,oDACA,mBAAGI,UAAU,0B,4CCuBRO,MAvCf,YAAmD,IAAhCX,EAA+B,EAA/BA,QAASQ,EAAsB,EAAtBA,MAAOI,EAAe,EAAfA,YACjC,OACE,qBAAKR,UAAWJ,EAAU,iBAAmB,UAA7C,SACE,sBAAKI,UAAU,MAAf,UACE,qBAAKA,UAAU,6BAAf,SACE,sBAAKA,UAAU,eAAf,UACE,oBAAIA,UAAU,sBAAd,uCACA,qBAAIA,UAAU,mBAAd,UACE,qBAAIA,UAAU,yBAAd,UACE,uBAAOS,KAAK,WAAWC,GAAG,cAC1B,uBAAOC,QAAQ,YAAf,yBAEF,qBAAIX,UAAU,yBAAd,UACE,uBAAOS,KAAK,WAAWC,GAAG,cAC1B,uBAAOC,QAAQ,YAAf,qCAKR,qBAAKX,UAAU,6BAAf,SACE,sBAAKA,UAAU,mCAAf,UACE,oBAAIA,UAAU,sBAAd,8BACA,qBAAKA,UAAU,gBAAf,SACE,cAAC,IAAD,CACEY,YAAa,SAAAR,GAAK,gBAAOS,YAAWT,KACpCU,KAAM,IACNC,SAAU,IACVC,SAAU,KACVZ,MAAOA,EACPH,SAAU,SAACC,GAAD,OAAOM,EAAYN,mB,8BCxB9Be,MARf,WACE,OACE,qBAAKjB,UAAU,kBAAf,SACE,sBAAKA,UAAU,WAAf,UAA0B,wBAAW,wBAAW,wBAAW,wBAAW,wBAAW,wBAAW,wBAAW,wBAAW,8B,iCCuJzGkB,UAjJE,WAAO,IAAD,EACSC,oBAAS,GADlB,mBACdvB,EADc,KACLC,EADK,OAESsB,oBAAS,GAFlB,mBAEdC,EAFc,KAELC,EAFK,OAGKF,oBAAS,GAHd,mBAGdG,EAHc,KAGPC,EAHO,OAIWJ,mBAAS,IAJpB,mBAIdpB,EAJc,KAIJyB,EAJI,OAKiBL,mBAAS,GAL1B,mBAKdM,EALc,KAKDC,EALC,OAMGP,mBAAS,IANZ,mBAMdQ,EANc,KAMR7B,EANQ,OAOGqB,mBAAS,GAPZ,mBAOdS,EAPc,KAORC,EAPQ,OAQKV,mBAAS,CACjCW,IAAK,IACLC,IAAK,OAVc,mBAQd3B,EARc,KAQP4B,EARO,KAabC,EADOC,cACPD,KACFE,EAAUC,iBAAOH,GACjBI,EAAUD,iBAAO,MAfF,SAsBNE,IAtBM,2EAsBrB,sCAAAC,EAAA,6DACMJ,EAAQK,UAAYP,IACtBE,EAAQK,QAAUP,EAClBP,EAAe,GACfH,GAAS,GACT1B,GAAW,GACXgC,EAAQ,GACRG,EAAS,CACPF,IAAK,IACLC,IAAK,QAGLT,IACFI,EAAe,GACfG,EAAQ,IAdZ,SAiBIL,EAAY,IACZH,GAAW,GACLoB,EAAQC,IACdC,QAAQC,IAAIjB,GACNkB,EArBV,UAqBmBC,IArBnB,qBAqBuCb,EArBvC,kBAqBqDQ,EArBrD,iBAqBmEhB,EArBnE,qBAqB2FrB,EAAM0B,IArBjG,qBAqBiH1B,EAAM2B,IArBvH,YAqB8HJ,GArB9H,UAsBsBoB,IAAWT,WAAWO,GAtB5C,QAsBUG,EAtBV,SAuBoCA,EAAIC,KAA5BlD,EAvBZ,EAuBYA,SAAUmD,EAvBtB,EAuBsBA,UACbnD,EAASM,QAKZmB,EAAYzB,GACZ8B,EAAQqB,GACR3B,GAAS,KANTM,EAAQ,GACRN,GAAS,IAOXF,GAAW,GAjCf,kDAoCIA,GAAW,GACXE,GAAS,GArCb,2DAtBqB,sBA8DrB4B,qBAAU,WACRb,MACC,CAACL,EAAMR,EAAaE,IAavB,OACE,qBAAK3B,UAAU,OAAf,SACE,sBAAKA,UAAU,YAAf,UACE,sBAAKA,UAAU,gBAAf,UACE,cAAC,EAAD,CACEJ,QAASA,EACTC,WAAYA,EACZC,QAASA,EACTC,SAAUA,IAEZ,cAAC,EAAD,CACEH,QAASA,EACTY,YAxBU,SAACN,GAAO,IAClB4B,EAAa5B,EAAb4B,IAAKC,EAAQ7B,EAAR6B,IACTM,EAAQG,SACVY,aAAaf,EAAQG,SAEvBH,EAAQG,QAAUa,YAAW,WAC3Bf,MACC,KACHN,EAAS,CACPF,MAAKC,SAgBC3B,MAAOA,OAITgB,GAAW,cAAC,EAAD,IAGXE,EACE,qBAAKtB,UAAU,MAAf,SACE,4EAEA,KAGJD,EAASM,OAAS,qBAAKL,UAAU,gBAAf,SAChB,qBAAKA,UAAU,MAAf,SAEID,EAASuD,KAAI,SAACC,EAASC,GACrB,OACE,qBACExD,UAAU,sCADZ,SAIE,cAACyD,EAAA,EAAD,CACEF,QAASA,KAHNC,UAWb,KAEL5B,EAAO,GACN,cAAC,IAAD,CACE8B,UAAW9B,EACX+B,UAAW,OACXC,UAAW,OACXC,mBAAoB,aACpBC,cAAe,kBACfC,gBAAiB,0BACjBC,kBAAmB,kBACnBC,oBAAqB,0BACrBC,kBAAmB,kBACnBC,sBAAuB,kBACvBC,aAxHgB,SAAClE,GACzBmE,cACA,IAAMC,EAAepE,EAAEqE,SACvB7C,EAAe4C,EAAe,GAC9B/C,GAAS,IAqHDiD,YAAa","file":"static/js/7.33f0965c.chunk.js","sourcesContent":["import React from 'react'\r\nimport './Filter.scss'\r\nconst Filter = ({ sidebar, setSidebar, setSort, products }) => {\r\n  return (\r\n    <div className=\"filter\">\r\n      <div className=\"filter-left\">\r\n        <select\r\n          className=\"filter-left__select\"\r\n          onChange={(e) => setSort(e.target.value)}\r\n        >\r\n          <option value=\"sort=''\">Sắp xếp theo giá tiền </option>\r\n          <option value=\"sort=price\">Giá từ thấp đến cao</option>\r\n          <option value=\"sort=-price\">Giá từ cao đến thấp</option>\r\n        </select>\r\n      </div>\r\n      <div className=\"filter-right\">\r\n        <div className=\"filter-right__result\">\r\n          <span>Hiển thị tất cả {products.length} kết quả</span>\r\n        </div>\r\n        <div className=\"filter-right__button\" onClick={() => setSidebar(!sidebar)}>\r\n          <span>Tìm kiếm</span>\r\n          <i className='bx bx-menu'></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\nimport './Sidebar.scss'\r\nimport InputRange from \"react-input-range\";\r\nimport \"react-input-range/lib/css/index.css\";\r\nimport ConvertVnd from '../../../../utils/convertVnd';\r\nfunction Sidebar({ sidebar, value, handlePrice }) {\r\n  return (\r\n    <div className={sidebar ? \"sidebar active\" : \"sidebar\"}>\r\n      <div className=\"row\">\r\n        <div className=\"col-xl-6 col-lg-6 col-md-6\">\r\n          <div className=\"sidebar-item\">\r\n            <h2 className=\"sidebar-item__title\">CHẤT LƯỢNG</h2>\r\n            <ul className=\"sidebar-checkbox\">\r\n              <li className=\"sidebar-checkbox__item\">\r\n                <input type=\"checkbox\" id=\"checkbox1\" />\r\n                <label htmlFor=\"checkbox1\">In stock</label>\r\n              </li>\r\n              <li className=\"sidebar-checkbox__item\">\r\n                <input type=\"checkbox\" id=\"checkbox2\" />\r\n                <label htmlFor=\"checkbox2\">Out of stock</label>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-xl-6 col-lg-6 col-md-6\">\r\n          <div className=\"sidebar-item sidebar-item--price\">\r\n            <h2 className=\"sidebar-item__title\">GIÁ TIỀN</h2>\r\n            <div className=\"sidebar-price\">\r\n              <InputRange\r\n                formatLabel={value => `${ConvertVnd(value)}`}\r\n                step={10000}\r\n                minValue={200000}\r\n                maxValue={1500000}\r\n                value={value}\r\n                onChange={(e) => handlePrice(e)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","import React from 'react'\r\nimport './Loading.scss'\r\nfunction Loading() {\r\n  return (\r\n    <div className=\"loading-product\">\r\n      <div className=\"lds-grid\"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loading\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport './ShopPage.scss'\r\nimport Filter from './components/Filter'\r\nimport Sidebar from './components/Sidebar'\r\nimport ProductItem from '../../components/ProductItem'\r\nimport { useParams } from 'react-router-dom'\r\nimport productApi from '../../api/productApi'\r\nimport Loading from './components/Loading'\r\nimport ReactPaginate from 'react-paginate';\r\nimport scrollToTop from '../../utils/scrollToTop'\r\nimport { limitProductCategory, URL_API } from '../../constants'\r\nconst ShopPage = () => {\r\n  const [sidebar, setSidebar] = useState(false)\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(false)\r\n  const [products, setProducts] = useState([])\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [sort, setSort] = useState('')\r\n  const [page, setPage] = useState(0)\r\n  const [value, setValue] = useState({\r\n    min: 200000,\r\n    max: 1500000\r\n  })\r\n  const params = useParams()\r\n  const { slug } = params\r\n  const slugRef = useRef(slug)\r\n  const timeRef = useRef(null)\r\n  const onClickPagination = (e) => {\r\n    scrollToTop()\r\n    const selectedPage = e.selected;\r\n    setCurrentPage(selectedPage + 1)\r\n    setError(false)\r\n  }\r\n  async function getProduct() {\r\n    if (slugRef.current !== slug) {\r\n      slugRef.current = slug\r\n      setCurrentPage(1)\r\n      setError(false)\r\n      setSidebar(false)\r\n      setPage(0)\r\n      setValue({\r\n        min: 200000,\r\n        max: 1500000\r\n      })\r\n    }\r\n    if (error) {\r\n      setCurrentPage(0)\r\n      setPage(0)\r\n    }\r\n    try {\r\n      setProducts([])\r\n      setLoading(true)\r\n      const limit = limitProductCategory\r\n      console.log(sort);\r\n      const url = `${URL_API}/products/${slug}?limit=${limit}&page=${currentPage}&minPrice=${value.min}&maxPrice=${value.max}&${sort}`\r\n      const res = await productApi.getProduct(url)\r\n      const { products, totalPage } = res.data\r\n      if (!products.length) {\r\n        setPage(0)\r\n        setError(true)\r\n      }\r\n      else {\r\n        setProducts(products)\r\n        setPage(totalPage)\r\n        setError(false)\r\n      }\r\n      setLoading(false)\r\n    }\r\n    catch (err) {\r\n      setLoading(false)\r\n      setError(true)\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    getProduct()\r\n  }, [slug, currentPage, sort])\r\n  const handlePrice = (e) => {\r\n    const { min, max } = e\r\n    if (timeRef.current) {\r\n      clearTimeout(timeRef.current)\r\n    }\r\n    timeRef.current = setTimeout(() => {\r\n      getProduct()\r\n    }, 500)\r\n    setValue({\r\n      min, max\r\n    })\r\n  }\r\n  return (\r\n    <div className=\"shop\">\r\n      <div className=\"container\">\r\n        <div className=\"shop__heading\">\r\n          <Filter\r\n            sidebar={sidebar}\r\n            setSidebar={setSidebar}\r\n            setSort={setSort}\r\n            products={products}\r\n          />\r\n          <Sidebar\r\n            sidebar={sidebar}\r\n            handlePrice={handlePrice}\r\n            value={value}\r\n          />\r\n        </div>\r\n        {\r\n          loading && <Loading />\r\n        }\r\n        {\r\n          error ?\r\n            <div className=\"err\">\r\n              <h1>Không có sản phẩm nào</h1>\r\n            </div>\r\n            : null\r\n        }\r\n        {\r\n          products.length ? <div className=\"shop__content\">\r\n            <div className=\"row\">\r\n              {\r\n                products.map((product, index) => {\r\n                  return (\r\n                    <div\r\n                      className=\"col-xl-3 col-lg-3 col-md-4 col-sm-6\"\r\n                      key={index}\r\n                    >\r\n                      <ProductItem\r\n                        product={product}\r\n                      />\r\n                    </div>\r\n                  )\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n            : null\r\n        }\r\n        {page > 1 &&\r\n          <ReactPaginate\r\n            pageCount={page}\r\n            prevLabel={\"Prev\"}\r\n            nextLabel={\"Next\"}\r\n            containerClassName={\"pagination\"}\r\n            pageClassName={\"pagination-item\"}\r\n            activeClassName={\"pagination-item--active\"}\r\n            pageLinkClassName={\"pagination-link\"}\r\n            activeLinkClassName={\"pagination-link--active\"}\r\n            nextLinkClassName={\"pagination-next\"}\r\n            previousLinkClassName={\"pagination-prev\"}\r\n            onPageChange={onClickPagination}\r\n            initialPage={0}\r\n          />\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ShopPage\r\n"],"sourceRoot":""}